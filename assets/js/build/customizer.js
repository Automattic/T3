(()=>{"use strict";window.wp=window.wp||{},window.wp.customize=window.wp.customize||{},function(e,n,i,o){const t={};o.customize.resizer=t;let s=0,r=!1;t.cache=function(){t.$={},t.$.window=i(e),t.$.body=i(n.body),t.$.customizer=i(n.getElementById("customize-controls")),t.$.overlay=i(".wp-full-overlay.expanded"),t.$.collapser=i(".collapse-sidebar-label")},t.init=function(){t.cache(),t.$.customizer.append('<div class="customizer-resizer"></div>'),t.$.resizer=i(".customizer-resizer"),t.checkWidth(),t.events()},t.events=function(){t.initIframeMouseEvents(),t.$.resizer.on("mousedown",t.resizerEngage),t.$.collapser.on("click",t.snapToDefault),i(e).resize(_.debounce(t.checkWidth,50))},t.checkWidth=function(){if(t.$.window.width()<640)return r=!1,t.$.body.removeClass("resizable"),t.snapToDefault();r||(t.$.body.addClass("resizable"),r=!0)},t.resizerEngage=function(e){const o=t.$.window.width(),s=o-t.$.customizer.width();e.preventDefault(),s<100?(t.sizeCustomizer(o-320),t.fullWidth("no")):(t.$.customizer.addClass("no-animation"),i(n).on("mousemove",t.resizerMovement),i(n).on("mouseup",t.resizerDisengage))},t.resizerMovement=function(e){const n=s<e.pageX;s=e.pageX;const i=t.$.window.width()-s;return i<300&&i>100?(t.snapToDefault(),t.resizerDisengage(),t.fullWidth("yes")):(t.fullWidth("no"),s>=320||s>=300&&n?t.sizeCustomizer(s):!n&&s>270&&s<320?t.snapToDefault():void(s<270&&(t.snapToDefault(),t.resizerDisengage(),t.$.collapser.trigger("click"))))},t.resizerDisengage=function(){i(n).off("mousemove",t.resizerMovement),i(n).off("mouseup",t.resizerDisengage),t.$.customizer.removeClass("no-animation")},t.fullWidth=function(e){const n="yes"===e?"addClass":"removeClass";t.$.body[n]("fullwidth-customizer")},t.snapToDefault=function(){t.sizeCustomizer()},t.sizeCustomizer=function(e){e=e||"",t.$.overlay.css({"margin-left":e}),t.$.resizer.css({"margin-left":e?e-5:e}),t.$.customizer.width(e)},t.initIframeMouseEvents=function(){setTimeout((function(){const e=t.$.overlay.find("iframe");e.length?(t.bubbleMouseEvent(e[0],"mousemove"),t.bubbleMouseEvent(e[0],"mouseup")):t.initIframeMouseEvents()}),500)},t.bubbleMouseEvent=function(i,o){const t="on"+o,s=i.contentWindow[t];i.contentWindow[t]=function(t){s&&s(t);const r=n.createEvent("MouseEvents"),u=i.getBoundingClientRect();r.initMouseEvent(o,!0,!1,e,t.detail,t.screenX,t.screenY,t.clientX+u.left,t.clientY+u.top,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null),i.dispatchEvent(r)}},o.customize.bind("ready",t.init)}(window,document,jQuery,window.wp)})();