(()=>{"use strict";window.wp=window.wp||{},window.wp.customize=window.wp.customize||{},function(e,t,o,n){const i={};n.customize.resizer=i;let s=0,u=!1;i.cache=function(){i.$={},i.$.window=o(e),i.$.body=o(t.body),i.$.customizer=o(t.getElementById("customize-controls")),i.$.overlay=o(".wp-full-overlay.expanded"),i.$.collapser=o(".collapse-sidebar-label")},i.init=function(){i.cache(),i.$.customizer.append('<div class="customizer-resizer"></div>'),o("#sub-accordion-section-themes").append('<li id="accordion-section-tumblr_themes" class="theme-section control-subsection"><button type="button" id="tumblr-themes-button" class="customize-themes-section-title themes-section-tumblr_themes">Tumblr themes</button></li>'),i.$.tumblrThemesButton=o("#tumblr-themes-button"),i.$.resizer=o(".customizer-resizer"),i.checkWidth(),i.events()},i.events=function(){i.initIframeMouseEvents(),i.$.resizer.on("mousedown",i.resizerEngage),i.$.collapser.on("click",i.snapToDefault),i.$.tumblrThemesButton.on("click",i.goToTumblrThemes),o(e).resize(_.debounce(i.checkWidth,50))},i.checkWidth=function(){if(i.$.window.width()<640)return u=!1,i.$.body.removeClass("resizable"),i.snapToDefault();u||(i.$.body.addClass("resizable"),u=!0)},i.resizerEngage=function(e){const n=i.$.window.width(),s=n-i.$.customizer.width();e.preventDefault(),s<100?(i.sizeCustomizer(n-320),i.fullWidth("no")):(i.$.customizer.addClass("no-animation"),o(t).on("mousemove",i.resizerMovement),o(t).on("mouseup",i.resizerDisengage))},i.resizerMovement=function(e){const t=s<e.pageX;s=e.pageX;const o=i.$.window.width()-s;return o<300&&o>100?(i.snapToDefault(),i.resizerDisengage(),i.fullWidth("yes")):(i.fullWidth("no"),s>=320||s>=300&&t?i.sizeCustomizer(s):!t&&s>270&&s<320?i.snapToDefault():void(s<270&&(i.snapToDefault(),i.resizerDisengage(),i.$.collapser.trigger("click"))))},i.resizerDisengage=function(){o(t).off("mousemove",i.resizerMovement),o(t).off("mouseup",i.resizerDisengage),i.$.customizer.removeClass("no-animation")},i.fullWidth=function(e){const t="yes"===e?"addClass":"removeClass";i.$.body[t]("fullwidth-customizer")},i.snapToDefault=function(){i.sizeCustomizer()},i.sizeCustomizer=function(e){e=e||"",i.$.overlay.css({"margin-left":e}),i.$.resizer.css({"margin-left":e?e-5:e}),i.$.customizer.width(e)},i.initIframeMouseEvents=function(){setTimeout((function(){const e=i.$.overlay.find("iframe");e.length?(i.bubbleMouseEvent(e[0],"mousemove"),i.bubbleMouseEvent(e[0],"mouseup")):i.initIframeMouseEvents()}),500)},i.bubbleMouseEvent=function(o,n){const i="on"+n,s=o.contentWindow[i];o.contentWindow[i]=function(i){s&&s(i);const u=t.createEvent("MouseEvents"),r=o.getBoundingClientRect();u.initMouseEvent(n,!0,!1,e,i.detail,i.screenX,i.screenY,i.clientX+r.left,i.clientY+r.top,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,null),o.dispatchEvent(u)}},i.goToTumblrThemes=function(){e.location=themeGardenCustomizerData.baseUrl},n.customize.bind("ready",i.init)}(window,document,jQuery,window.wp)})();