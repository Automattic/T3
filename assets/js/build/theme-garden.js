(()=>{"use strict";var e={207:(e,t,r)=>{r.d(t,{_:()=>m});var a=r(609),s=r(87),l=r(723),o=r(143),n=r(491);r(554);const m=(0,n.compose)((0,o.withSelect)((e=>({initialProps:e("tumblr3/theme-garden-store").getInitialFilterBarProps(),themes:e("tumblr3/theme-garden-store").getThemes()}))),(0,o.withDispatch)((e=>({fetchThemes:t=>e("tumblr3/theme-garden-store").fetchThemes(t),receiveThemes:t=>e("tumblr3/theme-garden-store").receiveThemes(t)}))))((({initialProps:{baseUrl:e,selectedCategory:t,categories:r},themes:o,fetchThemes:n,receiveThemes:m})=>{const[c,i]=(0,s.useState)(t),[h,d]=(0,s.useState)(o);(0,s.useEffect)((()=>{d(o)}),[o]),(0,s.useEffect)((()=>(window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u)})),[]);const u=async()=>{const e=new URLSearchParams(window.location.search).get("category")||"featured",t=await n(e);m(t),i(e)};return(0,a.createElement)("div",{className:"wp-filter"},(0,a.createElement)("div",{className:"filter-count"},(0,a.createElement)("span",{className:"count"},h.length)),(0,a.createElement)("label",{htmlFor:"t3-categories"},(0,l.__)("Categories","tumblr3")),(0,a.createElement)("select",{id:"t3-categories",name:"category",onChange:async({currentTarget:t})=>{try{const r=t.value,a=await n(r);m(a),i(r),window.history.pushState({},"",e+"&category="+t.value)}catch(e){console.error(e)}}},(0,a.createElement)("option",{value:"featured"},(0,l._x)("Featured","The name of a category in a list of categories.","tumblr3")),r.map((e=>(0,a.createElement)("option",{value:e.text_key,selected:c===e.text_key},e.name)))))}))},698:(e,t,r)=>{r.d(t,{x:()=>m});var a=r(609),s=r(87),l=r(143),o=r(491),n=r(723);r(554);const m=(0,o.compose)((0,l.withSelect)((e=>({themes:e("tumblr3/theme-garden-store").getThemes()}))))((({themes:e})=>{const[t,r]=(0,s.useState)(e);return(0,s.useEffect)((()=>{r(e)}),[e]),(0,a.createElement)("div",{className:"tumblr-themes"},e.map((e=>(0,a.createElement)("article",{className:"tumblr-theme"},(0,a.createElement)("header",{className:"tumblr-theme-header"},(0,a.createElement)("div",{className:"tumblr-theme-title-wrapper"},(0,a.createElement)("span",{className:"tumblr-theme-title"},e.title))),(0,a.createElement)("div",{className:"tumblr-theme-content"},(0,a.createElement)("img",{className:"tumblr-theme-thumbnail",src:e.thumbnail}),(0,a.createElement)("ul",{className:"tumblr-theme-buttons"},(0,a.createElement)("li",null,(0,a.createElement)("a",{href:e.activate_url},(0,n._x)("Activate","Text on a button to activate a theme.","tumblr3")))))))))}))},554:(e,t,r)=>{const a=window.wp.apiFetch;var s=r.n(a),l=r(143);const o={logoUrl:themeGardenData.logoUrl,themes:themeGardenData.themes,categories:themeGardenData.categories,selectedCategory:themeGardenData.selectedCategory,baseUrl:themeGardenData.baseUrl},n={receiveThemes:e=>({type:"RECEIVE_THEMES",themes:e}),*fetchThemes(e){try{return c.FETCH_THEMES(e)}catch(e){throw new Error("Failed to update settings")}}},m={getLogoUrl:()=>o.logoUrl,getInitialFilterBarProps:()=>({categories:o.categories,selectedCategory:o.selectedCategory,baseUrl:o.baseUrl}),getThemes:e=>e.themes},c={FETCH_THEMES:e=>s()({path:"/tumblr3/v1/themes?category="+e,method:"GET"}).then((e=>e)).catch((e=>{throw console.error("API Error:",e),e}))},i=(0,l.createReduxStore)("tumblr3/theme-garden-store",{reducer:(e=o,t)=>"RECEIVE_THEMES"===t.type?{...e,themes:t.themes}:e,actions:n,selectors:m,controls:c,resolvers:{}});(0,l.register)(i)},609:e=>{e.exports=window.React},491:e=>{e.exports=window.wp.compose},143:e=>{e.exports=window.wp.data},87:e=>{e.exports=window.wp.element},723:e=>{e.exports=window.wp.i18n}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,r),l.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=r(609),s=r(87),l=r(207),o=r(698),n=r(723),m=r(143),c=r(491);r(554);const i=(0,c.compose)((0,m.withSelect)((e=>({logoUrl:e("tumblr3/theme-garden-store").getLogoUrl()}))))((({logoUrl:e})=>(0,a.createElement)("div",{className:"wrap"},(0,a.createElement)("h1",{className:"wp-heading-inline",id:"theme-garden-heading"},(0,a.createElement)("img",{className:"tumblr-logo-icon",src:e,alt:""}),(0,a.createElement)("span",null,(0,n.__)("Tumblr Themes","tumblr3"))),(0,a.createElement)(l._,null),(0,a.createElement)(o.x,null)))),h=document.getElementById("tumblr-theme-garden");h?(0,s.createRoot)(h).render((0,a.createElement)(i,null)):console.error("Failed to find the root element for the settings panel.")})();